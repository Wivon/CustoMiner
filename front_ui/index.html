<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>CustoMiner</title>

    <!-- links -->
    <link rel="stylesheet" href="assets/style.css">
    <script src="assets/app.js" defer></script>
    <script src="assets/translator.js" defer></script>
    <script src="assets/gameDirectory.js" defer></script>
    <script src="assets/shortcuts.js" defer></script>
    <script src="assets/updater.js" defer></script>
</head>

<body class="loading">

    <div class="loader">
        <div class="CustoMiner">
            <img src="assets/img/icons/CustoMinerICONx128.png">
            <h1>CustoMiner</h1>
        </div>

        <div class="animation">
            <span style="animation-delay: 0s;"></span>
            <span style="animation-delay: 0.2s;"></span>
            <span style="animation-delay: 0.4s;"></span>
            <span style="animation-delay: 0.6s;"></span>
            <span style="animation-delay: 0.8s;"></span>
            <span style="animation-delay: 1s;"></span>
        </div>
    </div>

    <div class="nav">
        <div class="left">
            <img src="assets/img/icons/CustoMinerICONx128.png" alt="appIcon">
            <div class="actions">
                <a href="#home" class="active" translation-id="nav.home"></a>
                <a href="#settings" translation-id="nav.settings"></a>
                <a href="#library" translation-id="nav.library"></a>
                <div class="activeMenuIndicator"></div>
            </div>
        </div>
        <div class="right">
            <div class="minimizeBtn miniBtn" onclick="ipcRenderer.send('minimize')">-</div>
            <div class="minimizeBtn miniBtn" onclick="ipcRenderer.send('toggle-maximize')">
                <div class="square"></div>
            </div>
            <div class="closeBtn miniBtn" onclick="ipcRenderer.send('quit')">X</div>
        </div>
    </div>

    <div class="home active menu">
        <section id="gameDirectory">
            <h2 translation-id="menus.homeMenu.sections.gameDirectory.title"></h2>
            <div class="actions">
                <div class="input">
                    <div class="fileSelector">
                        <img src="assets/img/icons/browse_icon.png" alt="browse">
                        <input type="text" onkeyup="saveInput(this)" id="gameDirectoryInput" name="gameDir"
                            placeholder="game directory path" class="rounded-left leftpad-icon">
                    </div>
                    <button class="rounded-right iconBTN">
                        <img src="assets/img/icons/next-transparent.png" alt="next" id="nextGameDirectory">
                    </button>
                </div>
                <button onclick="detectMinecraftDir()" class="secondary-btn"
                    translation-id="menus.homeMenu.sections.gameDirectory.autoDetect"></button>
            </div>
        </section>

        <section id="addNew" class="section-mt">
            <div class="container">
                <div class="card">
                    <img src="assets/img/banners/banner_shaderpacks_card.png" alt="shaderpacks banner">
                    <div class="add">
                        <p class="name" translation-id="menus.homeMenu.sections.addNew.cardsNames.shaderPacks"></p>
                        <button class="addBtn" translation-id="menus.homeMenu.sections.addNew.add"></button>
                    </div>
                </div>
                <div class="card">
                    <img src="assets/img/banners/banner_resourcespacks_card.png" alt="resources packs banner">
                    <div class="add">
                        <p class="name" translation-id="menus.homeMenu.sections.addNew.cardsNames.resourcePacks"></p>
                        <button class="addBtn" translation-id="menus.homeMenu.sections.addNew.add"></button>
                    </div>
                </div>
                <div class="card">
                    <img src="assets/img/banners/banner_mods_card.png" alt="mods banner">
                    <div class="add">
                        <p class="name" translation-id="menus.homeMenu.sections.addNew.cardsNames.mods"></p>
                        <button class="addBtn" translation-id="menus.homeMenu.sections.addNew.add"></button>
                    </div>
                </div>
            </div>
        </section>
    </div>

    <div class="settings menu" style="height: 0;">
        <div class="horizontal">
            <section id="locale">
                <h2 translation-id="menus.settingsMenu.sections.locale.title"></h2>
                <div class="actions">
                    <div class="input">
                        <select name="locale" class="localeSelector rounded-left">
                            <option value="en">English</option>
                            <option value="fr">Français</option>
                            <option value="es">Español</option>
                        </select>
                        <button onclick="saveInput(document.querySelector('.localeSelector')); loadLocaleFile();"
                            class="rounded-right iconBTN">
                            <img src="assets/img/icons/next-transparent.png" alt="next" id="nextGameDirectory">
                        </button>
                    </div>
                    <button class="destructive-btn" translation-id="menus.settingsMenu.sections.locale.reset"
                        onclick="document.querySelector('.localeSelector').value=`en`; saveInput(document.querySelector('.localeSelector')); loadLocaleFile();"></button>
                </div>
                <a href="#" translation-id="menus.settingsMenu.sections.locale.report"></a>
            </section>
            <section id="devtools">
                <h2>Developer Tools</h2>
                <input type="checkbox" name="dev-shortcuts" id="devshortcuts">
                <label for="dev-shortcuts">Developer Shortcuts</label>
                <br>
                <input type="checkbox" name="reduced-motion" id="r-motion">
                <label for="reduced-motion">Reduced motion</label>
                <br>
                <button onclick="ipcRenderer.send('open-devtools')">open devtools</button>
            </section>
        </div>
        <section id="updates" class="section-mt">
            <h2></h2>
            <p id="currentVersion"></p>
            <div class="actions">
                <div class="downloading">
                    <p class="speed"></p>
                    <div class="progress">
                        <div class="displayer"></div>
                        <p class="percentage">0%</p>
                    </div>
                    <button translation-id="menus.settingsMenu.sections.updates.restart"
                        onclick="ipcRenderer.send('restart_app')" class="disabled"></button>
                </div>
                <div class="utd">
                    <button translation-id="menus.settingsMenu.sections.updates.check"
                        onclick="ipcRenderer.send('check_updates')"></button>
                    <button onclick="shell.openExternal('https://github.com/Wivon/CustoMiner')">GITHUB</button>
                </div>
            </div>
        </section>
    </div>

    <div class="library menu" style="height: 0;">
        <button>OPEN SOMETHING</button>
    </div>

    <script>
        const { ipcRenderer, shell } = require('electron');

        // app version
        const appVersion = ipcRenderer.invoke('get-version')
            .then(version => {
                document.getElementById('currentVersion').innerHTML = "V" + version
                return version
            })
    </script>
</body>

</html>