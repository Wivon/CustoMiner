<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>CustoMiner</title>

    <!-- links -->
    <link rel="stylesheet" href="assets/style.css">
    <script src="assets/app.js" defer></script>
    <script src="assets/simplePopup.js" defer></script>
    <script src="assets/translator.js" defer></script>
    <script src="assets/gameDirectory.js" defer></script>
    <script src="assets/shortcuts.js" defer></script>
    <script src="assets/updater.js" defer></script>
    <script src="assets/notifications.js" defer></script>
    <script src="assets/addNew.js" defer></script>
</head>

<body class="loading">

    <div class="loader">
        <div class="CustoMiner">
            <img src="assets/img/icons/CustoMinerICONx128.png">
            <h1>CustoMiner</h1>
        </div>

        <div class="animation">
            <span style="animation-delay: 0s;"></span>
            <span style="animation-delay: 0.2s;"></span>
            <span style="animation-delay: 0.4s;"></span>
            <span style="animation-delay: 0.6s;"></span>
            <span style="animation-delay: 0.8s;"></span>
            <span style="animation-delay: 1s;"></span>
        </div>
    </div>

    <div class="nav">
        <div class="left">
            <img src="assets/img/icons/CustoMinerICONx128.png" alt="appIcon">
            <div class="actions">
                <a href="#home" class="active" translation-id="nav.home"></a>
                <a href="#settings" translation-id="nav.settings"></a>
                <a href="#library" translation-id="nav.library"></a>
                <a href="#!addnew-popup" style="display: none;">ADD NEW</a>
                <div class="activeMenuIndicator"></div>
            </div>
        </div>
        <div class="right">
            <h2 style="display: none; opacity: .75; transform: scale(0.8);">PROD. BUILD</h2>
            <div class="minimizeBtn miniBtn active-anim" onclick="ipcRenderer.send('minimize')">-</div>
            <div class="minimizeBtn miniBtn active-anim" onclick="ipcRenderer.send('toggle-maximize')">
                <div class="square"></div>
            </div>
            <div class="closeBtn miniBtn active-anim" onclick="ipcRenderer.send('quit')">X</div>
        </div>
    </div>

    <div id="notification" class="notification hidden-notif">
        <h3>This is a test</h3>
        <p>Lorem ipsum dolor sit, amet consectetur adipisicing elit</p>
        <div class="actions">
            <a href="#settings" class="main" translation-id="notification.actions.open"></a>
            <a onclick="hideNotification()" translation-id="notification.actions.close"></a>
        </div>
    </div>

    <div class="popup">
        <img class="invert" src="assets/img/icons/browse_icon.png">
        <h3></h3>
        <p class="text"></p>
        <div class="buttons">
            <button onclick="hidePopup()" class="Popupbutton" translation-id="common.cancel"></button>
            <hr>
            <button class="Popupbutton" translation-id="common.confirm"></button>
        </div>
    </div>

    <div class="addnew-popup">
        <div class="top">
            <h2></h2>
        </div>
        <div class="container">
            <div class="infos">
                <span>Select the Shader you want to add</span>
                <div class="inputField fileSelector">
                    <img src="assets/img/icons/browse_icon.png" alt="browse">
                    <input type="text" placeholder="Shader filepath" name="fileSelector" class="leftpad-icon">
                </div>
                <span>Enter the new name of the shader file</span>
                <div class="inputField fileSelector">
                    <input type="text" name="newFileName">
                </div>
            </div>
            <div class="preview">
                <img src="" alt="preview image">
                <span></span>
            </div>
        </div>
        <div class="actions">
            <button class="secondary-btn" translation-id="common.cancel" onclick="hideAddNewPopup()"></button>
            <button class="main-action" translation-id="common.confirm"></button>
        </div>
    </div>

    <div onclick="hidePopup()" class="popupBackground popHidden"></div>
    <div onclick="hidePopup()" class="popupBackground-lower popHidden"></div>

    <div class="home active menu">
        <section id="gameDirectory">
            <h2 translation-id="menus.homeMenu.sections.gameDirectory.title"></h2>
            <div class="actions">
                <div class="input">
                    <div class="fileSelector">
                        <img src="assets/img/icons/browse_icon.png" alt="browse">
                        <input type="text" onkeyup="saveInput(this)" id="gameDirectoryInput" name="gameDir"
                            placeholder="game directory path" class="rounded-left leftpad-icon">
                    </div>
                    <button class="rounded-right iconBTN">
                        <img src="assets/img/icons/next-transparent.png" alt="next" id="nextGameDirectory">
                    </button>
                </div>
                <button onclick="detectMinecraftDir()" class="secondary-btn"
                    translation-id="menus.homeMenu.sections.gameDirectory.autoDetect"></button>
            </div>
        </section>

        <section id="addNew" class="section-mt">
            <div class="container">
                <div class="card">
                    <img src="assets/img/banners/banner_shaderpacks_card.png" alt="shaderpacks banner">
                    <div class="add">
                        <p class="name" translation-id="menus.homeMenu.sections.addNew.cardsNames.shaderPacks"></p>
                        <button class="addBtn" add-target="shaderpacks" translation-id="common.add"
                            onclick="openAddNewPopup('shaders')"></button>
                    </div>
                </div>
                <div class="card">
                    <img src="assets/img/banners/banner_resourcespacks_card.png" alt="resources packs banner">
                    <div class="add">
                        <p class="name" translation-id="menus.homeMenu.sections.addNew.cardsNames.resourcePacks"></p>
                        <button class="addBtn" translation-id="common.add"
                        onclick="openAddNewPopup('resourcepacks')"></button>
                    </div>
                </div>
                <div class="card">
                    <img src="assets/img/banners/banner_mods_card.png" alt="mods banner">
                    <div class="add">
                        <p class="name" translation-id="menus.homeMenu.sections.addNew.cardsNames.mods"></p>
                        <button class="addBtn" translation-id="common.add"
                        onclick="openAddNewPopup('mods')"></button>
                    </div>
                </div>
                <div class="card">
                    <img src="assets/img/banners/banner_mods_card.png" alt="mods banner">
                    <div class="add">
                        <p class="name" translation-id="menus.homeMenu.sections.addNew.cardsNames.maps"></p>
                        <button class="addBtn" translation-id="common.add"
                        onclick="openAddNewPopup('maps')"></button>
                    </div>
                </div>
                <div class="card">
                    <img src="assets/img/banners/banner_shaderpacks_card.png" alt="mods banner">
                    <div class="add">
                        <p class="name" translation-id="menus.homeMenu.sections.addNew.cardsNames.screenshots"></p>
                        <button class="addBtn disabled" translation-id="menus.homeMenu.sections.addNew.view"></button>
                    </div>
                </div>
                <div class="card">
                    <img src="assets/img/banners/banner_resourcespacks_card.png" alt="mods banner">
                    <div class="add">
                        <p class="name">Datapacks</p>
                        <button class="addBtn" translation-id="common.add"
                        onclick="openAddNewPopup('datapacks')"></button>
                    </div>
                </div>
            </div>
        </section>
    </div>

    <div class="settings menu" style="height: 0;">
        <div class="horizontal">
            <section id="locale">
                <h2 translation-id="menus.settingsMenu.sections.locale.title"></h2>
                <div class="actions">
                    <div class="input">
                        <select name="locale" class="localeSelector rounded-left">
                            <option value="en">English</option>
                            <option value="fr">Français</option>
                            <option value="es">Español</option>
                        </select>
                        <button onclick="saveInput(document.querySelector('.localeSelector')); loadLocaleFile();"
                            class="rounded-right iconBTN">
                            <img src="assets/img/icons/next-transparent.png" alt="next" id="nextGameDirectory">
                        </button>
                    </div>
                    <button class="destructive-btn" translation-id="menus.settingsMenu.sections.locale.reset"
                        onclick="document.querySelector('.localeSelector').value=`en`; saveInput(document.querySelector('.localeSelector')); loadLocaleFile();"></button>
                </div>
                <a href="#" translation-id="menus.settingsMenu.sections.locale.report"></a>
            </section>
            <section id="devtools">
                <h2>Developer Tools</h2>
                <input type="checkbox" name="dev-shortcuts" id="devshortcuts">
                <label for="dev-shortcuts">Developer Shortcuts</label>
                <br>
                <input type="checkbox" name="reduced-motion" id="r-motion">
                <label for="reduced-motion">Reduced motion</label>
                <br>
                <button onclick="ipcRenderer.send('open-devtools')">open devtools</button>
            </section>
        </div>
        <section id="updates" class="section-mt">
            <h2></h2>
            <p id="currentVersion"></p>
            <div class="actions">
                <div class="downloading">
                    <p class="speed"></p>
                    <div class="progress">
                        <div class="displayer"></div>
                        <p class="percentage">0%</p>
                    </div>
                    <button translation-id="menus.settingsMenu.sections.updates.restart"
                        onclick="ipcRenderer.send('restart_app')" class="disabled"></button>
                </div>
                <div class="utd">
                    <button translation-id="menus.settingsMenu.sections.updates.check" class="checkUpdates"></button>
                    <button onclick="shell.openExternal('https://github.com/Wivon/CustoMiner')"><img
                            src="assets/img/icons/github_icon.png"> GITHUB</button>
                </div>
            </div>
        </section>
    </div>

    <div class="library menu" style="height: 0;">
        <button>OPEN SOMETHING</button>
    </div>

    <script>
        const { ipcRenderer, shell } = require('electron');

        // app version
        const appVersion = ipcRenderer.invoke('get-version')
            .then(version => {
                document.getElementById('currentVersion').innerHTML = "V" + version
                return version
            })

        // is dev ?
        const isDev = ipcRenderer.invoke('is-dev')
            .then(dev => {
                return JSON.parse(dev)
            })

        if (isDev) {
            document.querySelector('.nav .right h2').style.display = 'block';
        }
    </script>
</body>

</html>